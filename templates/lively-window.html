<template id="template" data-class="Window">
	<style>
	:host {
		position: fixed;
		z-index: 100;
		width: 400px;
    	height: 300px;
	}
	:host * {
		box-sizing: border-box;
	}

	::content {
		display: flex;
		flex-direction: column;
		flex-grow: 1;
	}
	::content > * {
		position: absolute;
		height: 100%;
		width: 100%;
	}

	.window {
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		background-color: #ffffff;
		box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.3);
	}
	.window.dragging  *, .window.resizing  * {
		-webkit-touch-callout: none;
		-webkit-user-select: none;
		-khtml-user-select: none;
		-moz-user-select: none;
		-ms-user-select: none;
		user-select: none;
	}
	.window-titlebar {
		position: relative;
		display: flex;
		flex-grow: 0;
    	height: 2em;
		width: 100%;
		padding: 0.3em 0.4em;
		border: none;
		border-bottom: 1px #e9e9e9 solid;
	}
	.window-title {
		flex-grow: 1;
		font-weight: 600;
		vertical-align: middle;
		cursor: move;
	}
	.window-title span {
		vertical-align: middle;
		font-size: 1.1em;
		line-height: 1.5rem;
	}
    .window-title span small {
        font-style: italic;
        color: #333;
    }
	.window-controls {
		flex-grow: 0;
	}
	.window-min, .window-max, .window-close {
		display: inline-block;
		color: #777777;
		background-color: #ffffff;
		width: 1.5rem;
		text-align: center;
		margin-left: 1px;
		font-weight: 700;
		cursor: pointer;
		line-height: 1.5rem;
	}
	.window-min:hover, .window-max:hover, .window-close:hover {
		background-color: #cde6f7;
		color: #2a8dd4;
	}
	.window-resize {
		position: absolute;
		right: -2px;
		bottom: -2px;
		font-size: 0.8em;
		cursor: se-resize;
		font-weight: 800;
	}
	.window-content {
		position: relative;
		width: auto;
		height: auto;
		margin: 0.4em;
		flex: 1;
	}
	</style>

	<div class="window">
		<div class="window-titlebar">
			<div class="window-title"><span></span></div>
			<div class="window-controls">
				<span class="window-min">&lowbar;</span>
				<span class="window-max">&#9634;</span>
				<span class="window-close">&#10005;</span>
			</div>
		</div>
		<div class="window-content" id="window-content">
			<content></content>
		</div>
		<span class="window-resize">&there4;</span>
	</div>
</template>

<script>
(function() {
	var template = document.currentScript.ownerDocument.querySelector('#template');
	var clone = document.importNode(template.content, true);

	Promise.all([
		System.import('../templates/classes/Window.js'), 
		System.import('../src/client/morphic/component-loader.js')
	]).then(modules => {
		var Window = modules[0];
		var Loader = modules[1];
		Loader.register('lively-window', clone, Object.create(Window.prototype || Window.default.prototype));
	});
})();
</script>
